
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>modio.mod &#8212; mod.io 0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for modio.mod</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="kn">from</span> <span class="nn">.objects</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">.errors</span> <span class="k">import</span> <span class="n">modioException</span><span class="p">,</span> <span class="n">BadRequest</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="k">import</span> <span class="n">_convert_date</span><span class="p">,</span> <span class="n">_clean_and_convert</span>

<div class="viewcode-block" id="Mod"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod">[docs]</a><span class="k">class</span> <span class="nc">Mod</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Represent a modio mod object.</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    id : int</span>
<span class="sd">        ID of the mod. Filter attribute.</span>
<span class="sd">    status : Status</span>
<span class="sd">        Status of the mod. Filter attribute.</span>
<span class="sd">    visible : Visibility</span>
<span class="sd">        Visibility of the mod. Filter attribute.</span>
<span class="sd">    game : int</span>
<span class="sd">        ID of the game the mod is for. Filter attribute.</span>
<span class="sd">    submitter : User</span>
<span class="sd">        Instance of the modio User that submitted the mod. Filter attribute.</span>
<span class="sd">    date : datetime.datetime</span>
<span class="sd">        UNIX timestamp of the date the mod was registered. Filter attribute.</span>
<span class="sd">    updated : datetime.datetime</span>
<span class="sd">        UNIX timestamp of the date the mod was last updated. Filter attribute.</span>
<span class="sd">    live : datetime.datetime</span>
<span class="sd">        UNIX timestamp of the date the mod went live. Filter attribute.</span>
<span class="sd">    logo : Image</span>
<span class="sd">        The mod logo</span>
<span class="sd">    homepage : str</span>
<span class="sd">        Link to the homepage of the mod, can be None. Filter attribute.</span>
<span class="sd">    name : str</span>
<span class="sd">        Name of the mod. Filter attribute.</span>
<span class="sd">    name_id : str</span>
<span class="sd">        sub_domain mod for the game (https://game_name.mod.io/name_id). Filter </span>
<span class="sd">        attribute.</span>
<span class="sd">    summary : str</span>
<span class="sd">        Summary of the mod. Filter attribute.</span>
<span class="sd">    description :str</span>
<span class="sd">        Detailed description of the mod, supports HTML. Filter attribute.</span>
<span class="sd">    metadata : str</span>
<span class="sd">        Metadata stored by developers which may include properties on how information </span>
<span class="sd">        required. Can be None. Filter attribute.</span>
<span class="sd">    maturity : Maturity</span>
<span class="sd">        Maturity option of the mod. Filter attribute.</span>
<span class="sd">    profile : str</span>
<span class="sd">        URL of the mod&#39;s modio profile</span>
<span class="sd">    file : ModFile</span>
<span class="sd">        Latest release instance. Can be None. Filter attribute.</span>
<span class="sd">    media : ModMedia</span>
<span class="sd">        Contains mod media data (links and images)</span>
<span class="sd">    rating : Stats</span>
<span class="sd">        Summary of all rating for this mod</span>
<span class="sd">    tags : dict</span>
<span class="sd">        Tags for this mod. Filter attribute.</span>
<span class="sd">    kvp : dict</span>
<span class="sd">        Contains key-value metadata. Filter attribute.</span>
<span class="sd">    plaintext : str</span>
<span class="sd">        description field converted into plaintext.</span>


<span class="sd">    Filter-Only Attributes</span>
<span class="sd">    -----------------------</span>
<span class="sd">    These attributes can only be used at endpoints which return instances</span>
<span class="sd">    of this class and takes filter arguments. They are not attached to the</span>
<span class="sd">    object itself and trying to access them will cause an AttributeError</span>

<span class="sd">    sort_downloads : str</span>
<span class="sd">        Sort argument, provide to sort function to sort by most/least</span>
<span class="sd">        downloaded</span>
<span class="sd">    sort_popular : str</span>
<span class="sd">        Sort argument, provide to sort function to sort by most/least</span>
<span class="sd">        popular</span>
<span class="sd">    sort_rating : str</span>
<span class="sd">        Sort argument, provide to sort function to sort by weighed</span>
<span class="sd">        rating</span>
<span class="sd">    sort_subscribers : str</span>
<span class="sd">        Sort argument, provide to sort function to sort by most/least</span>
<span class="sd">        subscribers </span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="p">(</span><span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="n">Visibility</span><span class="p">(</span><span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;visible&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">game</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;game_id&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">_convert_date</span><span class="p">(</span><span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;date_added&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updated</span> <span class="o">=</span> <span class="n">_convert_date</span><span class="p">(</span><span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;date_updated&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">live</span> <span class="o">=</span> <span class="n">_convert_date</span><span class="p">(</span><span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;date_live&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logo</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="o">**</span><span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;logo&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">homepage</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;homepage_url&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name_id</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;name_id&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">summary</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;summary&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;metadata_blob&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;profile_url&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">media</span> <span class="o">=</span> <span class="n">ModMedia</span><span class="p">(</span><span class="o">**</span><span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;media&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maturity</span> <span class="o">=</span> <span class="n">Maturity</span><span class="p">(</span><span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;maturity_option&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stats</span> <span class="o">=</span> <span class="n">Stats</span><span class="p">(</span><span class="o">**</span><span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;stats&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">{</span><span class="n">tag</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="p">:</span> <span class="n">tag</span><span class="p">[</span><span class="s2">&quot;date_added&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="p">[])}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;client&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_file</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;modfile&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kvp_raw</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;metadata_kvp&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file</span> <span class="o">=</span>  <span class="n">ModFile</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_file</span><span class="p">,</span> <span class="n">game_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_file</span> <span class="k">else</span> <span class="kc">None</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">submitter</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;submitted_by&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plaintext</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;description_plaintext&quot;</span><span class="p">)</span>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">kvp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">meta</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kvp_raw</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;metakey&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">meta</span><span class="p">:</span>
                <span class="n">meta</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;metakey&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
            
            <span class="n">meta</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;metakey&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;metavalue&quot;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">meta</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;Mod id=</span><span class="si">{self.id}</span><span class="s2"> name=</span><span class="si">{self.name}</span><span class="s2"> game=</span><span class="si">{self.game}</span><span class="s2">&gt;&quot;</span>   

<div class="viewcode-block" id="Mod.get_file"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.get_file">[docs]</a>    <span class="k">def</span> <span class="nf">get_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span> <span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the Mod File with the following ID</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        id : int</span>
<span class="sd">            ID of the mod file you wish to retrieve</span>

<span class="sd">        Raises</span>
<span class="sd">        -------</span>
<span class="sd">        NotFound</span>
<span class="sd">            A mod with that ID has not been found</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ModFile</span>
<span class="sd">            The found modfile</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">file_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_request</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;/games/</span><span class="si">{self.game}</span><span class="s2">/mods/</span><span class="si">{self.id}</span><span class="s2">/files/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ModFile</span><span class="p">(</span><span class="o">**</span><span class="n">file_json</span><span class="p">,</span> <span class="n">game_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mod.get_files"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.get_files">[docs]</a>    <span class="k">def</span> <span class="nf">get_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get all mod files for this mod. Takes filtering arguments. Returns a named tuple</span>
<span class="sd">        with parameters results and pagination.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        filter : Optional[Filter]</span>
<span class="sd">            A instance of Filter to be used for filtering, paginating and sorting </span>
<span class="sd">            results</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        Returned</span>
<span class="sd">            The results and pagination tuple from this request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">files_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_request</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;/games/</span><span class="si">{self.game}</span><span class="s2">/mods/</span><span class="si">{self.id}</span><span class="s2">/files&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Returned</span><span class="p">([</span><span class="n">ModFile</span><span class="p">(</span><span class="o">**</span><span class="n">file</span><span class="p">,</span> <span class="n">game_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files_json</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]],</span> <span class="n">Pagination</span><span class="p">(</span><span class="o">**</span><span class="n">files_json</span><span class="p">))</span></div>

<div class="viewcode-block" id="Mod.get_events"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.get_events">[docs]</a>    <span class="k">def</span> <span class="nf">get_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get all events for that mod sorted by latest. Takes filtering arguments. Returns ,</span>
<span class="sd">        a named tuple with parameters results and pagination.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        filter : Optional[Filter]</span>
<span class="sd">            A instance of Filter to be used for filtering, paginating and sorting </span>
<span class="sd">            results</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        Returned</span>
<span class="sd">            The results and pagination tuple from this request</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_request</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;/games/</span><span class="si">{self.game}</span><span class="s2">/mods/</span><span class="si">{self.id}</span><span class="s2">/events&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Returned</span><span class="p">([</span><span class="n">Event</span><span class="p">(</span><span class="o">**</span><span class="n">event</span><span class="p">)</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">event_json</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]],</span> <span class="n">Pagination</span><span class="p">(</span><span class="o">**</span><span class="n">event_json</span><span class="p">))</span></div>

<div class="viewcode-block" id="Mod.get_tags"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.get_tags">[docs]</a>    <span class="k">def</span> <span class="nf">get_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span> 
        <span class="sd">&quot;&quot;&quot;Gets all the tags for this mod. Takes filtering arguments. Updates the instance&#39;s</span>
<span class="sd">        tag attribute. Returns a named tuple with parameters results and pagination.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        filter : Optional[Filter]</span>
<span class="sd">            A instance of Filter to be used for filtering, paginating and sorting </span>
<span class="sd">            results</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        Returned</span>
<span class="sd">            The results and pagination tuple from this request</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tag_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_request</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;/games/</span><span class="si">{self.game}</span><span class="s2">/mods/</span><span class="si">{self.id}</span><span class="s2">/tags&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="n">new_tags</span> <span class="o">=</span> <span class="p">{</span><span class="n">tag</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="p">:</span> <span class="n">_convert_date</span><span class="p">(</span><span class="n">tag</span><span class="p">[</span><span class="s2">&quot;date_added&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tag_json</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]}</span>
        <span class="k">return</span> <span class="n">Returned</span><span class="p">(</span><span class="n">new_tags</span><span class="p">,</span> <span class="n">Pagination</span><span class="p">(</span><span class="o">**</span><span class="n">tag_json</span><span class="p">))</span></div>

<div class="viewcode-block" id="Mod.get_metadata"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.get_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a dict of metakey-metavalue pairs. This will also update the mod&#39;s kvp attribute.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        Returned</span>
<span class="sd">            The results and pagination tuple from this request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">meta_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_request</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;/games/</span><span class="si">{self.game}</span><span class="s2">/mods/</span><span class="si">{self.id}</span><span class="s2">/metadatakvp&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kvp_raw</span> <span class="o">=</span> <span class="n">meta_json</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Returned</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kvp</span><span class="p">,</span> <span class="n">Pagination</span><span class="p">(</span><span class="o">**</span><span class="n">meta_json</span><span class="p">))</span></div>

<div class="viewcode-block" id="Mod.get_dependencies"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.get_dependencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a dict of dependency_id-date_added pairs. Takes filtering arguments. Returns </span>
<span class="sd">        a named tuple with parameters results and pagination.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        filter : Optional[Filter]</span>
<span class="sd">            A instance of Filter to be used for filtering, paginating and sorting </span>
<span class="sd">            results</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        Returned</span>
<span class="sd">            The results and pagination tuple from this request</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">depen_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_request</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;/games/</span><span class="si">{self.game}</span><span class="s2">/mods/</span><span class="si">{self.id}</span><span class="s2">/dependencies&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Returned</span><span class="p">({</span><span class="n">dependecy</span><span class="p">[</span><span class="s2">&quot;mod_id&quot;</span><span class="p">]</span> <span class="p">:</span> <span class="n">_convert_date</span><span class="p">(</span><span class="n">dependecy</span><span class="p">[</span><span class="s2">&quot;date_added&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">dependecy</span> <span class="ow">in</span> <span class="n">depen_json</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]},</span> <span class="n">Pagination</span><span class="p">(</span><span class="o">**</span><span class="n">depen_json</span><span class="p">))</span></div>

<div class="viewcode-block" id="Mod.get_team"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.get_team">[docs]</a>    <span class="k">def</span> <span class="nf">get_team</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of TeamMember object representing the Team in charge of the mod. Takes</span>
<span class="sd">        filtering arguments</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        filter : Optional[Filter]</span>
<span class="sd">            A instance of Filter to be used for filtering, paginating and sorting </span>
<span class="sd">            results</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        Returned</span>
<span class="sd">            The results and pagination tuple from this request</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">team_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_request</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;/games/</span><span class="si">{self.game}</span><span class="s2">/mods/</span><span class="si">{self.id}</span><span class="s2">/team&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Returned</span><span class="p">([</span><span class="n">TeamMember</span><span class="p">(</span><span class="o">**</span><span class="n">member</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="n">mod</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">team_json</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]],</span> <span class="n">Pagination</span><span class="p">(</span><span class="o">**</span><span class="n">team_json</span><span class="p">))</span></div>

<div class="viewcode-block" id="Mod.get_comments"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.get_comments">[docs]</a>    <span class="k">def</span> <span class="nf">get_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all the top level comments for this mod wih comments replying</span>
<span class="sd">        to top level comments stored in the children attribute. This can be flattened using</span>
<span class="sd">        the utils.flatten function. Takes filtering arguments</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        filter : Optional[Filter]</span>
<span class="sd">            A instance of Filter to be used for filtering, paginating and sorting </span>
<span class="sd">            results</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        Returned</span>
<span class="sd">            The results and pagination tuple from this request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">comment_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_request</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;/games/</span><span class="si">{self.game}</span><span class="s2">/mods/</span><span class="si">{self.id}</span><span class="s2">/comments&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Returned</span><span class="p">([</span><span class="n">Comment</span><span class="p">(</span><span class="o">**</span><span class="n">comment</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="n">mod</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">comment</span> <span class="ow">in</span> <span class="n">comment_json</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]],</span> <span class="n">Pagination</span><span class="p">(</span><span class="o">**</span><span class="n">comment_json</span><span class="p">))</span></div>

        <span class="c1"># comments = []</span>
        <span class="c1"># for comment_d in comment_json[&quot;data&quot;]:</span>
        <span class="c1">#     comment = Comment(**comment_d, client=self._client, mod=self)</span>
        <span class="c1">#     try:</span>
        <span class="c1">#         if comment.level == 1:</span>
        <span class="c1">#             comments.append(comment)</span>
        <span class="c1">#         elif comment.level == 2:</span>
        <span class="c1">#             comments[-1].children.append(comment)</span>
        <span class="c1">#         elif comment.level == 3:</span>
        <span class="c1">#             comments[-1].children[-1].children.append(comment)</span>
        <span class="c1">#     except IndexError:</span>
        <span class="c1">#         comments.append(comment)</span>


<div class="viewcode-block" id="Mod.get_stats"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a Stats object, representing a series of stats for the mod</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Stats</span>
<span class="sd">            The stats summary object for the mod.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stats_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_request</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;/games/</span><span class="si">{self.game}</span><span class="s2">/mods/</span><span class="si">{self.id}</span><span class="s2">/stats&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stats</span> <span class="o">=</span> <span class="n">stats</span> <span class="o">=</span> <span class="n">Stats</span><span class="p">(</span><span class="o">**</span><span class="n">stats_json</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">stats</span></div>

<div class="viewcode-block" id="Mod.get_owner"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.get_owner">[docs]</a>    <span class="k">def</span> <span class="nf">get_owner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the original submitter of the resource</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        User</span>
<span class="sd">            User that submitted the resource</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_post_request</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;/general/ownership&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;resource_type&quot;</span> <span class="p">:</span> <span class="s2">&quot;mods&quot;</span><span class="p">,</span> <span class="s2">&quot;resource_id&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">User</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="o">**</span><span class="n">user_json</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mod.edit"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.edit">[docs]</a>    <span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">fields</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Used to edit the mod details. Sucessful editing will update the mod instance.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        status : Status</span>
<span class="sd">            For game admins only.</span>
<span class="sd">        visible : Visibility</span>
<span class="sd">            Modify the game visibility</span>
<span class="sd">        name : str</span>
<span class="sd">            Name of the mod, cannot exceed 80 characters</span>
<span class="sd">        name_id : str</span>
<span class="sd">            Subdomain for the mod, cannot exceed 80 characters</span>
<span class="sd">        summary : str</span>
<span class="sd">            Summary of the mod, cannot exceed 250 characters</span>
<span class="sd">        description : str</span>
<span class="sd">            Detailed description for your mod, which can include details such as </span>
<span class="sd">            &#39;About&#39;, &#39;Features&#39;, &#39;Install Instructions&#39;, &#39;FAQ&#39;, etc. HTML supported </span>
<span class="sd">            and encouraged.</span>
<span class="sd">        homepage : str</span>
<span class="sd">            URL to the official homepage for this mod.</span>
<span class="sd">        stock : str</span>
<span class="sd">            Maximium number of subscribers for this mod. A value of 0 disables this limit.</span>
<span class="sd">        maturity : Maturity</span>
<span class="sd">            Maturity option of the mod. </span>
<span class="sd">        metadata : str</span>
<span class="sd">                Metadata stored by the mod developer which may include properties as to how </span>
<span class="sd">                the item works, or other information you need to display.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="n">_clean_and_convert</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">mod_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_put_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">fields</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="o">**</span><span class="n">mod_json</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mod.delete"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a mod and set its status to deleted.&quot;&quot;&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_delete_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="k">return</span> <span class="n">r</span></div>

<div class="viewcode-block" id="Mod.add_file"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.add_file">[docs]</a>    <span class="k">def</span> <span class="nf">add_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span> <span class="p">:</span> <span class="n">NewModFile</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds a new file to the mod, to do so first construct an instance of NewModFile</span>
<span class="sd">        and then pass it to the function.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        file : NewModFile</span>
<span class="sd">            The mod file to upload</span>

<span class="sd">        Raises</span>
<span class="sd">        -------</span>
<span class="sd">        modioException</span>
<span class="sd">            file argument must be type NewModFile</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        ModFile</span>
<span class="sd">            The modfile after being processed by the mod.io API</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">NewModFile</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">modioException</span><span class="p">(</span><span class="s2">&quot;file argument must be type NewModFile&quot;</span><span class="p">)</span>

        <span class="n">file_d</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">file_file</span> <span class="o">=</span> <span class="n">file_d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_file</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">file_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_post_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">/files&#39;</span><span class="p">,</span> <span class="n">h_type</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">file_d</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;filedata&quot;</span> <span class="p">:</span> <span class="n">f</span><span class="p">})</span>

        <span class="k">return</span> <span class="n">ModFile</span><span class="p">(</span><span class="o">**</span><span class="n">file_json</span><span class="p">,</span> <span class="n">game_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mod.add_media"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.add_media">[docs]</a>    <span class="k">def</span> <span class="nf">add_media</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">logo</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">images</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">youtube</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">sketchfab</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;Upload new media to the mod.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        logo : Optional[str]</span>
<span class="sd">            Path to the logo file. If on windows, must be \\ escaped. Image file which will represent </span>
<span class="sd">            your mods logo. Must be gif, jpg or png format and cannot exceed 8MB in filesize. Dimensions </span>
<span class="sd">            must be at least 640x360 and we recommended you supply a high resolution image with a 16 / 9 </span>
<span class="sd">            ratio. mod.io will use this logo to create three thumbnails with the dimensions of 320x180, </span>
<span class="sd">            640x360 and 1280x720.</span>
<span class="sd">        images : Optional[Union[str, list]]</span>
<span class="sd">            Can be either the path to a file called .zip file containing all the images or a list of paths to multiple</span>
<span class="sd">            image files. If on windows, must be \\ escaped. Only valid gif, jpg and png images in the zip file </span>
<span class="sd">            will be processed. </span>
<span class="sd">        youtube : Optional[List[str]]</span>
<span class="sd">            List of youtube links to be added to the gallery</span>
<span class="sd">        sketchfab : Optional[List[str]]</span>
<span class="sd">            List of sketchfab links to the be added to the gallery.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Message</span>
<span class="sd">            A message confirming the submission of the media</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">media</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">logo</span><span class="p">:</span>
            <span class="n">media</span><span class="p">[</span><span class="s2">&quot;logo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">logo</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">images_d</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;images&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="s2">&quot;image.zip&quot;</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">))}</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">images_d</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="s2">&quot;image{images.index(image)}&quot;</span> <span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">}</span>
            
        <span class="n">yt</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="s2">&quot;youtube[{youtube.index(link)}]&quot;</span> <span class="p">:</span> <span class="n">link</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">youtube</span><span class="p">}</span>
        <span class="n">sketch</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="s2">&quot;sketchfab[{sketchfab.index(link)}]&quot;</span> <span class="p">:</span> <span class="n">link</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">sketchfab</span><span class="p">}</span>

        <span class="n">media</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">media</span><span class="p">,</span> <span class="o">**</span><span class="n">images_d</span><span class="p">}</span>
        <span class="n">links</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">yt</span><span class="p">,</span> <span class="o">**</span><span class="n">sketch</span><span class="p">}</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">media_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_post_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">/media&#39;</span><span class="p">,</span> <span class="n">h_type</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">files</span> <span class="o">=</span> <span class="n">media</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">links</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">logo</span><span class="p">:</span>
                <span class="n">media</span><span class="p">[</span><span class="s2">&quot;logo&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">images_d</span><span class="p">[</span><span class="s2">&quot;images&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images_d</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="n">image</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">Message</span><span class="p">(</span><span class="o">**</span><span class="n">media_json</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mod.delete_media"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.delete_media">[docs]</a>    <span class="k">def</span> <span class="nf">delete_media</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">images</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">youtube</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">sketchfab</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;Delete media from the mod page. </span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        images : Optional[List[str]]</span>
<span class="sd">            Optional. List of image filenames that you want to delete</span>
<span class="sd">        youtube : Optional[List[str]]</span>
<span class="sd">            Optional. List of youtube links that you want to delete</span>
<span class="sd">        sketchfab : Optional[List[str]]</span>
<span class="sd">            Optional. List sketchfab links that you want to delete</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">images</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="s2">&quot;images[{images.index(image)}]&quot;</span> <span class="p">:</span> <span class="n">image</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">}</span>
        <span class="n">yt</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="s2">&quot;youtube[{youtube.index(link)}]&quot;</span> <span class="p">:</span> <span class="n">link</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">youtube</span><span class="p">}</span>
        <span class="n">sketch</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="s2">&quot;sketchfab[{sketchfab.index(link)}]&quot;</span> <span class="p">:</span> <span class="n">link</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">sketchfab</span><span class="p">}</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">images</span><span class="p">,</span> <span class="o">**</span><span class="n">yt</span><span class="p">,</span> <span class="o">**</span><span class="n">sketch</span><span class="p">}</span>

        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_delete_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">/media&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">fields</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">r</span></div>

<div class="viewcode-block" id="Mod.subscribe"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.subscribe">[docs]</a>    <span class="k">def</span> <span class="nf">subscribe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Subscribe to the mod. Returns None if user is already subscribed. </span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        Mod</span>
<span class="sd">            The mod that was just subscribed to, if the user was already subscribed it will return None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">mod_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_post_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">/subscribe&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Mod</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="o">**</span><span class="n">mod_json</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">BadRequest</span><span class="p">:</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="Mod.unsubscribe"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.unsubscribe">[docs]</a>    <span class="k">def</span> <span class="nf">unsubscribe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unsubscribe from a mod. Returns None if the user is not subscribed.&quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_delete_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">/subscribe&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">r</span>
        <span class="k">except</span> <span class="n">BadRequest</span><span class="p">:</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="Mod.add_tags"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.add_tags">[docs]</a>    <span class="k">def</span> <span class="nf">add_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">tags</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add tags to a mod, tags are case insensitive and duplicates will be removed. Tags</span>
<span class="sd">        which are not in the game&#39;s tag_options will not be added.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        tags : List[str]</span>
<span class="sd">            list of tags to be added. </span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_tags</span><span class="p">()</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="n">tag</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span> <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">keys</span><span class="p">()]))</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">tags</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">modioException</span><span class="p">(</span><span class="s2">&quot;No unique tags were submitted&quot;</span><span class="p">)</span>

        <span class="n">fields</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="s2">&quot;tags[{tags.index(tag)}]&quot;</span> <span class="p">:</span> <span class="n">tag</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">}</span>

        <span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_post_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">/tags&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">fields</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">Message</span><span class="p">(</span><span class="o">**</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mod.delete_tags"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.delete_tags">[docs]</a>    <span class="k">def</span> <span class="nf">delete_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">tags</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete tags from the mod, tags are case insensitive and duplicates will be removed. Providing</span>
<span class="sd">        no arguments will remove every tag from the mod.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        tags : list</span>
<span class="sd">            List of tags to remove, if no list is provided, will remove every tag from the mod.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_tags</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">tags</span><span class="p">:</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="n">tag</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span> <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">keys</span><span class="p">()]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">tags</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">modioException</span><span class="p">(</span><span class="s2">&quot;No unique tags were submitted&quot;</span><span class="p">)</span>

        <span class="n">fields</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="s2">&quot;tags[{tags.index(tag)}]&quot;</span> <span class="p">:</span> <span class="n">tag</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">}</span> <span class="k">if</span> <span class="n">tags</span> <span class="k">else</span> <span class="p">{</span><span class="s2">&quot;tags[]&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>

        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_delete_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">/tags&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">fields</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span>
            
        <span class="k">return</span> <span class="n">r</span></div>

    <span class="k">def</span> <span class="nf">_add_rating</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rating</span> <span class="p">:</span> <span class="n">RatingType</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_post_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">/ratings&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;rating&quot;</span><span class="p">:</span><span class="n">rating</span><span class="o">.</span><span class="n">value</span><span class="p">})</span>
        <span class="k">except</span> <span class="n">BadRequest</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">get_stats</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="Mod.add_positive_rating"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.add_positive_rating">[docs]</a>    <span class="k">def</span> <span class="nf">add_positive_rating</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds a good rating to the mod, the author of the rating will be the authenticated user.</span>
<span class="sd">        If the mod has already been rated by the user it will return False. If the positive rating</span>
<span class="sd">        is successful it will return True&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_rating</span><span class="p">(</span><span class="n">RatingType</span><span class="o">.</span><span class="n">good</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mod.add_negative_rating"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.add_negative_rating">[docs]</a>    <span class="k">def</span> <span class="nf">add_negative_rating</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds a bad rating to the mod, the author of the rating will be the authenticated user.</span>
<span class="sd">        If the mod has already been rated by the user it will return False. If the negative rating</span>
<span class="sd">        is successful it will return True.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_rating</span><span class="p">(</span><span class="n">RatingType</span><span class="o">.</span><span class="n">bad</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mod.add_metadata"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.add_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">add_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">metadata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add metadate key-value pairs to the mod. To submit new meta data, pass meta data keys</span>
<span class="sd">        as keyword arguments and meta data value as a list of values. E.g pistol_dmg = [800, 400].</span>
<span class="sd">        Keys support alphanumeric, &#39;-&#39; and &#39;_&#39;. Total lengh of key and values cannot exceed 255</span>
<span class="sd">        characters. To add meta-keys which contain a dash in their name they must be passed as an</span>
<span class="sd">        upacked dictionnary.</span>

<span class="sd">        Example</span>
<span class="sd">        --------</span>
<span class="sd">        `mod.add_metadata(difficulty=[&quot;hard&quot;, &quot;medium&quot;, &quot;easy&quot;])`</span>
<span class="sd">            This will add the values &quot;hard&quot;, &quot;medium&quot; and &quot;easy&quot; to the meta key &quot;difficulty&quot;</span>
<span class="sd">        `mod.add_metadata(**{&quot;test-var&quot;: [&quot;test1&quot;, &quot;test2&quot;, &quot;test3&quot;]})`</span>
<span class="sd">            This will add the values &quot;test1&quot;, &quot;test2&quot; and &quot;test3&quot; to meta key &quot;test-var&quot;</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        Message</span>
<span class="sd">            message on the status of the successful added meta data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">metadata_d</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">:</span>
            <span class="n">metadata_d</span><span class="p">[</span><span class="n">f</span><span class="s2">&quot;metadata[</span><span class="si">{index}</span><span class="s2">]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;</span><span class="si">{data}</span><span class="s2">:{&#39;:&#39;.join(metadata[data])}&quot;</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">checked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_post_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">/metadatakvp&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">metadata_d</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_kvp_raw</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;metakey&quot;</span> <span class="p">:</span> <span class="n">key</span><span class="p">,</span> <span class="s2">&quot;metavalue&quot;</span> <span class="p">:</span> <span class="n">item</span><span class="p">})</span>

        <span class="k">return</span> <span class="n">Message</span><span class="p">(</span><span class="o">**</span><span class="n">checked</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mod.delete_metadata"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.delete_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">delete_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">metadata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Deletes metadata from a mod. To do so pass the meta-key as a keyword argument and the</span>
<span class="sd">        meta-values you wish to delete as a list. You can pass an empty list in which case all</span>
<span class="sd">        meta-values for the meta-key will be deleted. To delete meta-keys which contain a dash in their </span>
<span class="sd">        name they must be passed as an upacked dictionnary.</span>

<span class="sd">        Example</span>
<span class="sd">        --------</span>
<span class="sd">        mod.delete_metadata(difficulty=[&quot;easy&quot;])</span>
<span class="sd">            This will remove the value &quot;easy&quot; from the meta key &quot;difficulty&quot;</span>
<span class="sd">        mod.delete_metadata(difficulty=[])</span>
<span class="sd">            This will remove the meta key &quot;difficulty&quot;</span>
<span class="sd">        mod.delete_metadata(**{&quot;test-var&quot;: [&quot;test1&quot;]})</span>
<span class="sd">            This will remove the value &quot;test1&quot; from the meta key &quot;test-var&quot;</span>
<span class="sd">        mod.delete_metadata(**{&quot;test-var&quot;:[]})</span>
<span class="sd">            This will remove the meta key &quot;test-var&quot;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">metadata_d</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">:</span>
            <span class="n">metadata_d</span><span class="p">[</span><span class="n">f</span><span class="s2">&quot;metadata[</span><span class="si">{index}</span><span class="s2">]&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;</span><span class="si">{data}</span><span class="s2">{&#39;:&#39; if len(metadata[data]) &gt; 0 else &#39;&#39;}{&#39;:&#39;.join(metadata[data])}&quot;</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_delete_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">/metadatakvp&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">metadata_d</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_kvp_raw</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kvp_raw</span> <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;metakey&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">key</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_kvp_raw</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kvp_raw</span> <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;metakey&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">key</span> <span class="ow">and</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;metavalue&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">r</span></div>

<div class="viewcode-block" id="Mod.add_dependencies"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.add_dependencies">[docs]</a>    <span class="k">def</span> <span class="nf">add_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dependencies</span> <span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add mod dependencies required by the corresponding mod. A dependency is a mod </span>
<span class="sd">        that should be installed for this mod to run. </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dependencies : List[Union[int, Mod]]</span>
<span class="sd">            List of mod ids to submit as dependencies. </span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#for future</span>
        <span class="c1"># dependency = {f&quot;dependencies[{dependencies.index(data)}]&quot; : getattr(data, &quot;id&quot;, data) for data in dependencies}</span>
        <span class="c1"># r = self._client._post_request(f&#39;/games/{self.game}/mods/{self.id}/dependencies&#39;, data=dependency)</span>
        <span class="c1"># return Message(**r)</span>

        <span class="k">while</span> <span class="n">dependencies</span><span class="p">:</span>
            <span class="n">dependency</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="s2">&quot;dependencies[{dependencies.index(data)}]&quot;</span> <span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dependencies</span><span class="p">[:</span><span class="mi">5</span><span class="p">]}</span>
            <span class="n">dependencies</span> <span class="o">=</span> <span class="n">dependencies</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>

            <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_post_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">/dependencies&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">dependency</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Message</span><span class="p">(</span><span class="o">**</span><span class="n">r</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mod.delete_dependencies"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.delete_dependencies">[docs]</a>    <span class="k">def</span> <span class="nf">delete_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dependencies</span> <span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete mod dependecies required by this mod.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        dependencies : List[Union[int, Mod]]</span>
<span class="sd">            List of dependencies to remove</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#for future</span>
        <span class="c1"># dependency = {f&quot;dependencies[{dependencies.index(data)}]&quot; : getattr(data, &quot;id&quot;, data) for data in dependencies}</span>
        <span class="c1"># r = self._client._delete_request(f&#39;/games/{self.game}/mods/{self.id}/dependencies&#39;, data=dependency)</span>
        <span class="c1"># return Message(**r)</span>

        <span class="n">r</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">while</span> <span class="n">dependencies</span><span class="p">:</span>
            <span class="n">dependency</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="s2">&quot;dependencies[{dependencies.index(data)}]&quot;</span> <span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dependencies</span><span class="p">[:</span><span class="mi">5</span><span class="p">]}</span>
            <span class="n">dependencies</span> <span class="o">=</span> <span class="n">dependencies</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>
            <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_delete_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">/dependencies&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">dependency</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">r</span></div>

<div class="viewcode-block" id="Mod.add_team_member"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.add_team_member">[docs]</a>    <span class="k">def</span> <span class="nf">add_team_member</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a user to the mod team. Will fire a MOD_TEAM_CHANGED event.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        email : str</span>
<span class="sd">            mod.io email of the user you wish to add</span>
<span class="sd">        level : Level</span>
<span class="sd">            Level of permissions you grant the user</span>
<span class="sd">        position : Optional[str]</span>
<span class="sd">            Title of the user position</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;email&quot;</span> <span class="p">:</span> <span class="n">email</span><span class="p">,</span> <span class="s2">&quot;level&quot;</span> <span class="p">:</span> <span class="n">level</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;position&quot;</span> <span class="p">:</span> <span class="n">position</span><span class="p">}</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_post_request</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;/games/</span><span class="si">{self.game}</span><span class="s1">/mods/</span><span class="si">{self.id}</span><span class="s1">/team&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Message</span><span class="p">(</span><span class="o">**</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mod.report"><a class="viewcode-back" href="../../mod.html#modio.mod.Mod.report">[docs]</a>    <span class="k">def</span> <span class="nf">report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="n">Report</span><span class="p">(</span><span class="mi">0</span><span class="p">)):</span>
        <span class="sd">&quot;&quot;&quot;Report a this mod, make sure to read mod.io&#39;s ToU to understand what is</span>
<span class="sd">        and isnt allowed.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        name : str</span>
<span class="sd">            Name of the report</span>
<span class="sd">        summary : str</span>
<span class="sd">            Detailed description of your report. Make sure you include all relevant information and </span>
<span class="sd">            links to help moderators investigate and respond appropiately.</span>
<span class="sd">        type : Report</span>
<span class="sd">            Type of the report</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        Message</span>
<span class="sd">            The returned message on the success of the query.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">&quot;resource&quot;</span> <span class="p">:</span>  <span class="s2">&quot;mods&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="nb">type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="s2">&quot;summary&quot;</span> <span class="p">:</span> <span class="n">summary</span>
        <span class="p">}</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_post_request</span><span class="p">(</span><span class="s1">&#39;/report&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">fields</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Message</span><span class="p">(</span><span class="o">**</span><span class="n">msg</span><span class="p">)</span></div></div>

</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">mod.io</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../game.html">Games</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mod.html">Mod</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../objects.html">Misc mod.io Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filtering&amp;sorting.html">Filtering, Sorting and Pagination</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utils.html">Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../enums.html">Enumerators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../errors.html">Errors and Exceptions</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Clement Julia.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>